# â˜• Kickpress CLI

> A fast and opinionated CLI for scaffolding Express.js projects with TypeScript, Prisma, and best practices built-in.

Kickpress helps you create production-ready Express.js APIs in seconds, with full CRUD generation, type safety, and modern tooling.

[![npm version](https://img.shields.io/npm/v/kickpress.svg)](https://www.npmjs.com/package/kickpress)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

## Table of Contents

- [â˜• Kickpress CLI](#-kickpress-cli)
  - [Table of Contents](#table-of-contents)
  - [âœ¨ Features](#-features)
  - [âš¡ Why Kickpress?](#-why-kickpress)
  - [ğŸ“‹ Requirements](#-requirements)
  - [ğŸš€ Quick Start](#-quick-start)
  - [âš ï¸ Important: Using pnpm](#ï¸-important-using-pnpm)
  - [ğŸ“¦ Installation](#-installation)
  - [ğŸ“– Command Reference](#-command-reference)
    - [`kick` - Create a New Project](#kick---create-a-new-project)
    - [`make` - Generate Resources](#make---generate-resources)
  - [ğŸ“‹ Complete Workflow Example](#-complete-workflow-example)
    - [1. Create Project](#1-create-project)
    - [2. Generate Resources](#2-generate-resources)
    - [3. Customize Schema](#3-customize-schema)
    - [4. Update Database](#4-update-database)
    - [5. Start Development](#5-start-development)
    - [6. Test Your API](#6-test-your-api)
  - [ğŸ“ Generated Project Structure](#-generated-project-structure)
  - [ğŸ¨ Generated Code Examples](#-generated-code-examples)
    - [Controller](#controller)
    - [Routes](#routes)
    - [Model](#model)
  - [ğŸ”§ Available Scripts](#-available-scripts)
  - [ğŸ› ï¸ Technology Stack](#ï¸-technology-stack)
    - [Core](#core)
    - [Development](#development)
    - [Database](#database)
  - [ğŸ¯ Key Features Explained](#-key-features-explained)
    - [1. Automatic Setup](#1-automatic-setup)
    - [2. Type Safety](#2-type-safety)
    - [3. Error Handling](#3-error-handling)
    - [4. Smart Pluralization](#4-smart-pluralization)
    - [5. Auto-Injection](#5-auto-injection)
    - [6. Modern Node.js](#6-modern-nodejs)
  - [ğŸ§ª Testing Your API](#-testing-your-api)
    - [Using HTTP Files](#using-http-files)
    - [Using curl](#using-curl)
  - [ğŸ› Troubleshooting](#-troubleshooting)
    - [pnpm: "Cannot find module" errors](#pnpm-cannot-find-module-errors)
    - [Prisma Client errors](#prisma-client-errors)
    - [Port already in use](#port-already-in-use)
  - [ğŸ“ Configuration](#-configuration)
    - [Environment Variables](#environment-variables)
    - [Prisma Configuration](#prisma-configuration)
  - [â“ FAQ](#-faq)
  - [ğŸ¤ Contributing](#-contributing)
  - [ğŸ‘¤ Author](#-author)
  - [ğŸ“„ License](#-license)
  - [ğŸ’¬ Support](#-support)

## âœ¨ Features

- ğŸš€ **Instant Setup** - Create a complete Express.js project in seconds with auto-installation
- ğŸ“¦ **TypeScript First** - Full TypeScript support with proper types (JavaScript optional)
- ğŸ—„ï¸ **Prisma ORM** - Pre-configured with SQLite adapter and automatic migrations
- ğŸ¯ **CRUD Generation** - Generate routes, controllers, and models instantly
- ğŸ”„ **Auto-injection** - Routes automatically added to your app
- âš¡ **Modern Stack** - Express, Prisma, tsx, and express-async-handler
- ğŸ›¡ï¸ **Error Handling** - Comprehensive error middleware included
- ğŸ“ **HTTP Requests** - Test files generated for each resource
- ğŸ¨ **Best Practices** - Follows industry standards and conventions
- âš™ï¸ **Zero Configuration** - Everything works out of the box

## âš¡ Why Kickpress?

| Task                 | Manual Setup          | With Kickpress  |
| -------------------- | --------------------- | --------------- |
| Project Setup        | 15-30 minutes         | 30 seconds      |
| Prisma Configuration | Manual config         | Auto-configured |
| CRUD Generation      | Write from scratch    | 1 command       |
| Error Handling       | Custom implementation | Built-in        |
| Type Safety          | Manual types          | Auto-generated  |
| Route Registration   | Manual import         | Auto-injected   |
| Database Setup       | Multiple commands     | Automated       |

## ğŸ“‹ Requirements

- **Node.js**: v20.0.0 or higher (for `--env-file` support)
- **Package Manager**: npm, pnpm, or yarn
- **Operating System**: macOS, Linux, or Windows

> **Note**: Kickpress uses Node.js native `--env-file` flag. For Node.js < v20, you may need additional configuration.

## ğŸš€ Quick Start

```bash
# Create a new project
npx kickpress kick my-api

# Navigate to project
cd my-api

# Start development server (dependencies already installed!)
pnpm dev
```

Your API is now running at `http://localhost:3000`! ğŸ‰

> **Note:** Dependencies and database are automatically set up during project creation. No manual installation needed!

## âš ï¸ Important: Using pnpm

If you use **pnpm** as your package manager, you might need to approve native builds:

```bash
pnpm approve-builds
# Select: better-sqlite3 (press space, then enter)
```

This is a one-time setup required by pnpm for native dependencies. **npm** and **yarn** work without this step.

## ğŸ“¦ Installation

No installation required! Use `npx` to run commands directly:

```bash
npx kickpress kick my-project
```

Or install globally:

```bash
npm install -g kickpress
```

## ğŸ“– Command Reference

### `kick` - Create a New Project

Creates a complete Express.js project with all dependencies and folder structure. **Automatically installs dependencies and sets up the database.**

**Syntax:**

```bash
kickpress kick [project-name] [options]
```

**Aliases:** `k`, `new`, `n`, `create`, `c`, `init`, `i`

**Arguments:**

- `project-name` - Name of your project (optional, will prompt if not provided)

**Options:**

- `-t, --template <template>` - Template to use (default: "default")
- `-d, --database <database>` - Database provider: sqlite | postgresql | mysql | mongodb (default: "sqlite")
- `--typescript` - Use TypeScript (default: true)
- `--no-typescript` - Use JavaScript instead
- `-h, --help` - Display help for command

**Examples:**

```bash
# Interactive mode (recommended for first-time users)
npx kickpress kick

# Quick TypeScript project with default settings
npx kickpress kick my-api

# Using aliases
npx kickpress k my-api

npx kickpress new my-api
npx kickpress n my-api

npx kickpress create my-api
npx kickpress c my-api

npx kickpress init my-api
npx kickpress i my-api

# JavaScript project
npx kickpress kick my-api --no-typescript
```

**What it does automatically:**

- âœ… Creates complete folder structure
- âœ… Generates all configuration files
- âœ… Installs all dependencies
- âœ… Generates Prisma Client
- âœ… Pushes initial schema to database
- âœ… Sets up error handling middleware
- âœ… Configures TypeScript/JavaScript

---

### `make` - Generate Resources

Generates CRUD resources for any entity with full type safety. **Automatically updates database after generation.**

**Syntax:**

```bash
kickpress make <entity> <component> [options]
```

**Aliases:** `m`, `generate`, `gen`, `g`

**Arguments:**

- `entity` - Name of the entity (singular, e.g., user, post, product)
- `component` - What to generate:
  - `resources` - Everything (routes, controller, model, types, schema, HTTP requests)
  - `routes` - Only route definitions
  - `controller` - Only controller logic
  - `model` - Only Prisma model operations

**Options:**

- `-f, --force` - Overwrite existing files
- `-h, --help` - Display help for command

**Examples:**

```bash
# Generate everything for user entity (recommended)
npx kickpress make user resources

# Using aliases
npx kickpress m category resources
npx kickpress generate post resources
npx kickpress gen post resources
npx kickpress g product resources

# Generate only specific components
npx kickpress make comment routes
npx kickpress make order controller
npx kickpress make product model

# Force overwrite existing files
npx kickpress make user resources --force
```

**What it generates:**

| Component         | Description                                | Files Created                      |
| ----------------- | ------------------------------------------ | ---------------------------------- |
| **Routes**        | RESTful endpoints with full CRUD           | `routes/entity.routes.ts`          |
| **Controller**    | Request handlers with async error handling | `controllers/entity.controller.ts` |
| **Model**         | Prisma database operations                 | `models/entity.model.ts`           |
| **Types**         | TypeScript interfaces (if TS project)      | `types/entity.d.ts`                |
| **Schema**        | Updates Prisma schema                      | `prisma/schema.prisma`             |
| **HTTP Requests** | Test file for API endpoints                | `requests/entity.http`             |

**What it does automatically:**

- âœ… Prompts for table name (plural form)
- âœ… Prompts for route path
- âœ… Generates all necessary files
- âœ… Auto-injects routes into `src/index.ts`
- âœ… Runs `prisma generate`
- âœ… Runs `prisma db push`

## ğŸ“‹ Complete Workflow Example

### 1. Create Project

```bash
npx kickpress kick blog-api
```

**Prompts:**

```
âœ” What is your project name? Â· blog-api
âœ” Would you like to use TypeScript? Â· Yes
âœ” Which database would you like to use? Â· sqlite
âœ” Which package manager would you like to use? Â· pnpm

â˜• Creating Kickpress project: blog-api

ğŸ“ Creating project structure...
ğŸ“ Creating project files...
âœ… Project created successfully!

ğŸ“¦ Installing dependencies...
âœ… Dependencies installed!

ğŸ“¦ Running Prisma generate...
âœ… Prisma client generated!

ğŸ“¦ Running Prisma push...
âœ… Database initialized!

Next steps:
cd blog-api
pnpm dev
```

> **If using pnpm:** Run `pnpm approve-builds` and select `better-sqlite3` before starting dev server.

### 2. Generate Resources

```bash
cd blog-api
npx kickpress make post resources
```

**Prompts:**

```
âœ” What should the table name be? (plural form) Â· posts
âœ” What should the route path be? Â· /posts

â˜• Generating resources for 'post'...

ğŸ“ Creating model...
ğŸ“ Updating Prisma schema...
ğŸ“ Creating types...
ğŸ“ Creating controller...
ğŸ“ Creating routes...
ğŸ“ Updating index file...
ğŸ“ Creating HTTP requests...

âœ… Resources generated successfully!

ğŸ“¦ Running Prisma generate...
âœ… Prisma client updated!

ğŸ“¦ Running Prisma push...
âœ… Database updated!
```

### 3. Customize Schema

Edit `prisma/schema.prisma`:

```prisma
model Post {
  id        Int      @id @default(autoincrement())
  title     String
  content   String
  published Boolean  @default(false)
  author    String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
```

### 4. Update Database

```bash
pnpm db:generate
pnpm db:push
```

### 5. Start Development

```bash
pnpm dev
```

### 6. Test Your API

Use the generated `requests/post.http` file or curl:

```bash
# Get all posts
curl http://localhost:3000/posts

# Create a post
curl -X POST http://localhost:3000/posts \
  -H "Content-Type: application/json" \
  -d '{"title":"Hello","content":"World","author":"You"}'

# Get one post
curl http://localhost:3000/posts/1

# Update post
curl -X PATCH http://localhost:3000/posts/1 \
  -H "Content-Type: application/json" \
  -d '{"title":"Updated Title"}'

# Delete post
curl -X DELETE http://localhost:3000/posts/1
```

## ğŸ“ Generated Project Structure

```
my-api/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts                    # Main entry point
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ prisma.ts               # Prisma client
â”‚   â”‚   â””â”€â”€ generated/              # Prisma generated files
â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â””â”€â”€ user.controller.ts      # Request handlers
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â””â”€â”€ user.model.ts           # Database operations
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â””â”€â”€ user.routes.ts          # Express routes
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ user.d.ts               # TypeScript types
â”‚   â”œâ”€â”€ middlewares/
â”‚   â”‚   â””â”€â”€ error.middleware.ts     # Error handling
â”‚   â”œâ”€â”€ config/                     # Configuration files
â”‚   â””â”€â”€ utils/                      # Utility functions
â”œâ”€â”€ prisma/
â”‚   â”œâ”€â”€ schema.prisma               # Database schema
â”‚   â””â”€â”€ migrations/                 # Database migrations
â”œâ”€â”€ requests/
â”‚   â””â”€â”€ user.http                   # HTTP test requests
â”œâ”€â”€ public/                         # Static files
â”œâ”€â”€ .env                            # Environment variables
â”œâ”€â”€ .gitignore
â”œâ”€â”€ prisma.config.ts                # Prisma configuration
â”œâ”€â”€ tsconfig.json                   # TypeScript config
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

## ğŸ¨ Generated Code Examples

### Controller

```typescript
import { Request, Response } from "express";
import asyncHandler from "express-async-handler";
import { userFindAll, userFindOne, userCreate } from "../models/user.model";

const all = asyncHandler(async (_: Request, res: Response) => {
  const users = await userFindAll();
  res.json(users);
});

const findOne = asyncHandler(async (req: Request, res: Response) => {
  const { id } = req.params;
  const user = await userFindOne(Number(id));

  if (!user) {
    res.status(404);
    throw new Error("User not found");
  }

  res.json(user);
});

export { all, findOne };
```

### Routes

```typescript
import { Router } from "express";
import {
  all,
  findOne,
  create,
  update,
  remove,
} from "../controllers/user.controller";

const router = Router();

router.route("/").get(all).post(create);
router.route("/:id").get(findOne).patch(update).delete(remove);

export default router;
```

### Model

```typescript
import prisma from "../lib/prisma";
import type { User, UserCreateInput } from "../types/user";

const userFindAll = async (): Promise<User[]> => {
  return prisma.user.findMany();
};

const userFindOne = async (id: number): Promise<User | null> => {
  return prisma.user.findUnique({ where: { id } });
};

export { userFindAll, userFindOne };
```

## ğŸ”§ Available Scripts

```bash
# Development
pnpm dev          # Start dev server with hot reload

# Build (TypeScript only)
pnpm build        # Compile to JavaScript

# Production
pnpm start            # Start production server

# Database
pnpm db:generate      # Generate Prisma Client
pnpm db:push          # Push schema to database
pnpm db:migrate       # Create migration
pnpm db:studio        # Open Prisma Studio
```

## ğŸ› ï¸ Technology Stack

### Core

- **Express.js** - Fast, minimalist web framework
- **TypeScript** - Type-safe JavaScript (optional)
- **Prisma** - Next-generation ORM

### Development

- **tsx** - TypeScript execution engine
- **express-async-handler** - Async error handling

### Database

- **SQLite** - Default (with better-sqlite3)
- Support for PostgreSQL, MySQL, MongoDB

## ğŸ¯ Key Features Explained

### 1. Automatic Setup

Everything is automated - no manual steps:

- âœ… Dependency installation
- âœ… Prisma client generation
- âœ… Database initialization
- âœ… Schema updates

### 2. Type Safety

Full TypeScript support with generated types:

```typescript
interface User {
  id: number;
  name: string;
  email: string;
  createdAt: Date;
  updatedAt: Date;
}
```

### 3. Error Handling

Comprehensive error middleware:

- âœ… Prisma errors (duplicates, not found)
- âœ… Validation errors
- âœ… Custom errors
- âœ… Stack traces (dev only)

### 4. Smart Pluralization

Solves the plural issue with prompts:

```bash
npx kickpress make city resources
âœ” What should the table name be? Â· cities
```

### 5. Auto-Injection

Routes automatically registered:

```typescript
import cityRoutes from "./routes/city.routes";
app.use("/cities", cityRoutes);
```

### 6. Modern Node.js

Uses native `--env-file` flag:

```json
{
  "scripts": {
    "dev": "tsx watch --env-file=.env src/index.ts"
  }
}
```

## ğŸ§ª Testing Your API

### Using HTTP Files

1. Install [REST Client](https://marketplace.visualstudio.com/items?itemName=humao.rest-client) in VS Code
2. Open `requests/user.http`
3. Click "Send Request"

### Using curl

See examples in [Complete Workflow](#6-test-your-api)

## ğŸ› Troubleshooting

### pnpm: "Cannot find module" errors

```bash
pnpm approve-builds
# Select: better-sqlite3
```

### Prisma Client errors

```bash
pnpm db:generate
```

### Port already in use

Change port in `.env`:

```env
PORT=3001
```

## ğŸ“ Configuration

### Environment Variables

```env
PORT=3000
NODE_ENV=development
DATABASE_URL="file:./dev.db"
```

### Prisma Configuration

```typescript
// prisma.config.ts
import "dotenv/config";
import { defineConfig, env } from "prisma/config";

export default defineConfig({
  schema: "prisma/schema.prisma",
  migrations: {
    path: "prisma/migrations",
  },
  datasource: {
    url: env("DATABASE_URL"),
  },
});
```

## â“ FAQ

**Q: Can I use this in production?**
A: Yes! The generated code is production-ready. Add authentication, CORS, and logging as needed.

**Q: What databases are supported?**
A: SQLite (default), PostgreSQL, MySQL, MongoDB.

**Q: Can I customize generated code?**
A: Absolutely! All code is yours to modify.

**Q: How is this different from NestJS?**
A: NestJS is a framework. Kickpress is a scaffolding tool that generates Express.js code.

## ğŸ¤ Contributing

Contributions are welcome! Please:

1. Fork the repository
2. Create your feature branch
3. Make your changes
4. Submit a pull request

## ğŸ‘¤ Author

**Marc Tyson CLEBERT**

- Website: [marctysonclebert.com](https://www.marctysonclebert.com)
- GitHub: [@clebertmarctyson](https://github.com/clebertmarctyson)
- Twitter: [@ClebertTyson](https://x.com/ClebertTyson)
- Email: [contact@marctysonclebert.com](mailto:contact@marctysonclebert.com)

## ğŸ“„ License

MIT Â© [Marc Tyson CLEBERT](https://www.marctysonclebert.com)

## ğŸ’¬ Support

- ğŸ› [Report Issues](https://github.com/clebertmarctyson/kickpress/issues)
- ğŸ’¡ [Request Features](https://github.com/clebertmarctyson/kickpress/issues/new)
- ğŸ“§ Email: [contact@marctysonclebert.com](mailto:contact@marctysonclebert.com)
- â­ [Star on GitHub](https://github.com/clebertmarctyson/kickpress)
- â˜• [Buy me a coffee](https://www.buymeacoffee.com/marctysonclebert)

---

Made with â˜• and â¤ï¸ by [Marc Tyson CLEBERT](https://www.marctysonclebert.com)
